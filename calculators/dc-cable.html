<div class="calculator-container">
  <h2>âš¡ DC Cable Size Calculator</h2>

  <label for="voltage">System Voltage (V)</label>
  <input type="number" id="voltage" placeholder="e.g. 24">

  <label for="current">Current (A)</label>
  <input type="number" id="current" placeholder="e.g. 20">

  <label for="length">Cable Length One-Way (m)</label>
  <input type="number" id="length" placeholder="e.g. 30">

  <label for="vdrop">Max Voltage Drop (%)</label>
  <input type="number" id="vdrop" placeholder="e.g. 3">

  <button class="calc-btn" onclick="calculateDC()">ğŸ” Calculate</button>

  <div id="result"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
function calculateDC() {
  const V = parseFloat(document.getElementById('voltage').value);
  const I = parseFloat(document.getElementById('current').value);
  const L = parseFloat(document.getElementById('length').value);
  const vdropPct = parseFloat(document.getElementById('vdrop').value);

  if (isNaN(V) || isNaN(I) || isNaN(L) || isNaN(vdropPct)) {
    document.getElementById('result').innerHTML = '<p style="color:red;"><strong>Please fill all fields correctly.</strong></p>';
    return;
  }

  const rho = 0.017; // Copper resistivity
  const Vdrop = V * (vdropPct / 100);
  const A = (2 * rho * I * L) / Vdrop;
  const A_rounded = Math.ceil(A * 10) / 10;

  document.getElementById('result').innerHTML = `
    <h3>âœ… Results:</h3>
    <p><strong>Required Cable Size:</strong> <span style="color:green;font-size:18px;">${A_rounded} mmÂ²</span> (Copper)</p>

    <h3>ğŸ“Š Step-by-Step Calculations:</h3>
    <p><strong>1. Inputs:</strong></p>
    <ul>
      <li>System Voltage (V): ${V} V</li>
      <li>Current (I): ${I} A</li>
      <li>One-Way Length (L): ${L} m</li>
      <li>Voltage Drop Limit: ${vdropPct}% = ${Vdrop.toFixed(2)} V</li>
    </ul>

    <p><strong>2. Formula Used:</strong></p>
    <code>A = (2 Ã— Ï Ã— I Ã— L) / V<sub>drop</sub></code><br/>
    <small>Ï = 0.017 Î©Â·mmÂ²/m (copper resistivity)</small>

    <p><strong>3. Substitution:</strong></p>
    <code>A = (2 Ã— 0.017 Ã— ${I} Ã— ${L}) / ${Vdrop.toFixed(2)}</code>

    <p><strong>4. Final Calculation:</strong></p>
    <code>A = ${A.toFixed(2)} mmÂ²</code> â†’ rounded up to <strong>${A_rounded} mmÂ²</strong>
  `;
}
</script>
